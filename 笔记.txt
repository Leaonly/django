
# 安装django
pip insatll django==2.2.2
pip install mysqlclient

# 生成 & 同步到数据库
python3 manage.py makemigrations
python3 manage.py migrate


## note项目 ===============================
mkdir day06 && cd day06
django-admin startproject tedu_note
python3 manage.py startapp user

# 启动
python3 manage.py runserver 0.0.0.0:8000


# mysql
create database tedu_note default charset utf8;

# settings.py配置
ALLOWED_HOSTS = ['192.168.170.136']
INSTALLED_APPS
'user',
#'django.middleware.csrf.CsrfViewMiddleware',
DATABASES
LANGUAGE_CODE = 'zh-Hans'
TIME_ZONE = 'Asia/Shanghai'




## Django 模版(template)中 的 {{}} 和 {%%} 是什么作用
只需要记两种特殊符号：
{{ }}和 {% %}
变量相关的用{{}}，逻辑相关的用{%%}。
举个例子：
{% for person in person_list %}

    <p>{{ person.name }}</p>
    
{% endfor %}

# 配置后台 app/admin.py
from .models import Note

# Register your models here.
class NoteManager(admin.ModelAdmin):
    # 列表页显示哪些字段的列
    list_display = ['id', 'title', 'content', 'user_id', 'is_active']
    # 链接到修改页
    list_display_links = ['title']
    # 添加搜索框
    search_fields = ['title', 'content']
admin.site.register(Note, NoteManager)


# django后台 创建用户
python3 manage.py createsuperuser


# EMAIL
# 开启邮箱授权码
from django.core import mail
mail.send_mail(subject='zabbix mail', message='haha', from_email='fewrghrehr@163.com', recipient_list=['1007682044@qq.com'])

## uWSGI
sudo pip3 install uwsgi=='2.0.18'
pip3 freeze| grep -i 'uwsgi'
# 启动
uwsgi --ini uwsgi.ini
# 关闭
uwsgi --stop uwsgi.pid
# nginx.conf的location配置
uwsgi_pass 192.168.170.136:8000;
include /etc/nginx/uwsgi_params;


# 静态文件配置 settings.py
STATIC_ROOT = '/app/mysite7_static/static'
# 复制静态文件到以上目录
python3 manage.py collectstatic